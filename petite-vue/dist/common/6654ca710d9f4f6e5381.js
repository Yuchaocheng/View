"use strict";(self.webpackChunkHiPei=self.webpackChunkHiPei||[]).push([[592],{937:(t,e,i)=>{i.d(e,{Z:()=>I});var n=i(790),o=i(910),s=i(846);const r={activateStatus:{url:"%s%s:%s/SDK/activateStatus",noAuth:!0,hideLoading:!0},language:{url:"%s%s:%s/SDK/language",noAuth:!0,hideLoading:!0},activate:{url:"%s%s:%s/ISAPI/System/activate",noAuth:!0},activateIPC:{url:"%s%s:%s/ISAPI/ContentMgmt/InputProxy/channels/activate",security1:["userName","password"]},challenge:{url:"%s%s:%s/ISAPI/Security/challenge",noAuth:!0},sessionLogin:{url:"%s%s:%s/ISAPI/Security/sessionLogin?timeStamp=%s",req:["param"]},login:{url:"%s%s:%s/ISAPI/Security/userCheck?timeStamp=%s",req:["timestamp"]},logServerCap:{url:"%s%s:%s/ISAPI/System/logServer/capabilities"},projectionScreenMgrCap:{url:"%s%s:%s/ISAPI/IoTGateway/projectionScreenMgr/capabilities?format=json"},deviceInfo:{url:"%s%s:%s/ISAPI/System/deviceInfo"}};var u=i(669);const a=i.n(u)().create({timeout:3e3});a.interceptors.request.use((t=>(console.log(t),{...t,url:t.url,method:t.type,data:t.data})),(t=>Promise.reject(t))),a.interceptors.response.use((t=>((t=>{const e=["color: mediumseagreen","font-size: 18px","font-weight:700"].join(";"),i=["color: #409EFF","font-size: 14px"].join(";");console.groupCollapsed(`%c ${t.config.method} ${t.config.url}`,e),console.log("%c Data:",i,JSON.parse(JSON.stringify(t.data||{})));try{console.log("%c Params:",i,t?.config?.data&&JSON.parse(t.config.data))}catch(e){console.log("%c Params:",i,t.config&&t.config.data)}console.log("%c Response:",i,t),console.info("%c Time:",i,new Date),console.groupEnd()})(t),{xhr:t.request,data:h(t.config,t.request)})),(t=>Promise.reject(t)));const h=(t,e)=>{let i=e.responseText,n=null;if(void 0!==i){if(e.responseXML)n=e.responseXML;else if(i.indexOf("<?xml")>-1)n=e.responseXML;else if(i.length&&"{"===i.charAt(0))try{n=JSON.parse(i)}catch(t){}}else n=e.responseText||null;return n},l=a,c=new class{constructor(){this.options={timeout:3e4,data:null,complete:null,success:null,error:null,401:null,403:null}}setOptions(t){this.options=Object.assign(this.options,t)}getOptions(){return this.options}processSuccessCB(t,e,i){if(t&&4===t.readyState&&"function"==typeof e.success){let n=this._getResponseData(i,t);return e.success(n,t)}}processErrorCB(t,e,i){if("function"==typeof i.error&&(4===t.readyState||"timeout"===e||"error"===e)){let e=this._getResponseData(i,t);return i.error(e,t)}}processCompleteCB(t,e){"function"==typeof e.complete&&e.complete(this._getResponseData(e,t),t)}submitRequest(t,e){let i={},n=this.getOptions();return n=Object.assign(n,e),(()=>{let e=n.username?n.username:"",o=n.password?n.password:"";if(2===f.getAuthType()){let t=f.getPluginAuthV2();t=(0,s.NV)(t),t&&(e=t.split(":")[0]||"",o=t.split(":")[1]||"")}i=Object.assign(i,{type:n.type,auth:{username:e,password:o},timeout:n.timeout,iSecurityVersion:n.iSecurityVersion,url:t,data:n.data,loginPassword:n.loginPassword,params:n.params||{}})})(),l(i)}_getResponseData(t,e){let i=e.responseText,n=null;if(void 0!==i){if(e.responseXML)n=e.responseXML;else if(i.indexOf("<?xml")>-1)n=e.responseXML;else if(i.length&&"{"===i.charAt(0))try{n=JSON.parse(i)}catch(t){}this._dealSecurityResponse(t,n)}else n=e.responseText||null;return n}_getAesIV(){return(0,s.FB)((new Date).getTime().toString())}_decodeAES(t,e){let i,n=f.getAuthInfo().szAESKey;try{i=(0,s.YY)(t,n,e)}catch(t){i=""}return(0,s.NV)(i)}_encodeAES(t,e){let i=f.getAuthInfo().szAESKey;return(0,s.zy)((0,s.oF)((0,n.YW)(t)),i,e)}_dealSecurityRequest(t){if(!t.cmd)return;let e=this,i=t.data,o=t.iSecurityVersion,s=r[t.cmd],u=this._getAesIV(),a=s["security"+o],h=!1,l=t.url;if("string"==typeof i&&i.indexOf("<?xml")>-1?i=(0,n.Ab)(i):!i||"object"!=typeof i||i.documentElement||t.queryObject?i&&"object"==typeof i&&i.documentElement&&s&&s["security"+o]&&(i=(0,n.Ab)((0,n.Fj)(i))):h=!0,a){var c=-1!==l.indexOf("?")?"&":"?";l+=c+"security="+o+"&iv="+u,t.loginPassword&&(l+="&loginPassword="+this._encodeAES(t.loginPassword,u)),i&&a.forEach((t=>{(0,n.sq)(i,t,(t=>t?e._encodeAES(t,u):""))}))}if(h)try{i=JSON.stringify(i)}catch(t){}t.data=i,t.url=l}_dealSecurityResponse(t,e){if(!t.cmd)return;let i,o=this,s=t.url,u=t.iSecurityVersion,a=r[t.cmd]["security"+u],h=t.type;a&&s&&-1!==s.indexOf("&iv=")&&(i=s&&s.substr(4+s.indexOf("&iv="),32)),!i||"GET"!==h&&"POST"!==h||a.forEach((t=>{(0,n.sq)(e,t,(t=>t?(0,n.v5)(o._decodeAES(t,i)):""))}))}};let p=new class{initURL(t,e,i){this.hostName=t||location.hostname,this.port=e||location.port,this.protocol=i||location.protocol,this.uri=this.protocol+"//"+this.hostName+":"+this.port}request(t,e){return this.uri=this.uri?this.uri:"",c.submitRequest(0===t.indexOf("http")?t:this.uri+t,e)}getErrorInfo(t){return{statusCode:(0,n.qd)(t,"statusCode","i")||(0,n.qd)(t,"statusValue","i"),subStatusCode:(0,n.qd)(t,"subStatusCode"),statusString:(0,n.qd)(t,"statusString"),lockStatus:"lock"===(0,n.qd)(t,"lockStatus"),retryLoginTime:(0,n.qd)(t,"retryLoginTime"),unlockTime:(0,n.qd)(t,"unlockTime","i")}}getExtraInfo(t){var e={bRiskPsw:(0,n.qd)(t,"isRiskPassword","b"),bSupportLoginTiming:(0,n.qd)(t,"isSupportLoginTiming","b"),bNormalUserInitialPassword:(0,n.qd)(t,"isNormalUserInitialPassword","b"),bNormalUserPasswordModified:(0,n.qd)(t,"isNormalUserPasswordModified","b")};return(0,n.qd)(t,"isActivated")?e.bActivated=(0,n.qd)(t,"isActivated","b"):e.bActivated=!0,e}};class m{initAuth(){this.retryTimes=0,this.timeoutId&&clearTimeout(this.timeoutId),this.bTimeout=!1,this.isLogin=!1}noLogin(){}login(t){let e=(0,s.FB)((new Date).getTime().toString()).substring(0,8);e=parseInt(e.replace("#",""),16).toString().substring(0,8);let i=p.request("/ISAPI/Security/sessionLogin/capabilities",{type:"GET",data:{username:t.name,random:e},success:({data:t})=>t,error:e=>{t.fail&&t.fail(p.getErrorInfo(e))}}),o=t.password;return i.then((({data:e})=>{let i=(0,n.qd)(e,"sessionID"),r=(0,n.qd)(e,"challenge"),u=(0,n.qd)(e,"iterations","i"),a=(0,n.qd)(e,"isIrreversible","b"),h=(0,n.qd)(e,"salt"),l=(0,n.qd)(e,"sessionIDVersion","i"),c=(0,n.qd)(e,"isSessionIDValidLongTerm","b"),p=(0,s.dh)(o,{challenge:r,userName:t.name,salt:h,iIterate:u},a),m="<SessionLogin>";return m+="<userName>"+(0,n.YW)(t.name)+"</userName>",m+="<password>"+p+"</password>",m+="<sessionID>"+i+"</sessionID>",m+="<isSessionIDValidLongTerm>"+c+"</isSessionIDValidLongTerm>",m+="<sessionIDVersion>"+l+"</sessionIDVersion>",m+="</SessionLogin>",m})).then((e=>p.request("/ISAPI/Security/sessionLogin?timeStamp="+(new Date).getTime(),{type:"POST",data:e}).then((({data:e})=>(this.isLogin=!0,this.heartBeat(),t.succ&&t.succ(p.getExtraInfo(e)),e))).catch((({data:e})=>(t.fail&&t.fail(p.getErrorInfo(e)),e)))))}logout(){return clearTimeout(this.timeoutId),p.request("/ISAPI/Security/sessionLogout",{type:"PUT",success:()=>{this.initAuth()},error:t=>t})}heartBeat(){let t=this;clearTimeout(this.timeoutId);let e="/ISAPI/Security/sessionHeartbeat",i="PUT";this.bTimeout||(e="/ISAPI/System/deviceInfo",i="GET"),this.isLogin&&p.request(e,{type:i,hideLoading:!0,success:()=>{t.retryTimes=0,t.timeoutId=setTimeout((()=>{t.heartBeat()}),3e4)},error:()=>{t.timeoutId=setTimeout((()=>{t.heartBeat()}),3e4)}})}clearHeartBeat(){clearTimeout(this.timeoutId)}getAuth(){return""}setAuth(){this.isLogin=!0}updateAuth(){}setHeartBeat(t){this.bTimeout=t,this.heartBeat()}async getPluginAuth(){let t=await this.getToken();return(0,s.oF)(":::4:"+t)}getToken(){var t="";return p.request("/ISAPI/Security/token?format=json",{hideLoading:!0,type:"GET",success:e=>(e&&e.Token&&(t=e.Token.value),t)})}}class g{setAuthType(t){this.oAuthImplementation&&this.oAuthImplementation.clearHeartBeat&&this.oAuthImplementation.clearHeartBeat(),2===t?this.oAuthImplementation=new AuthImplementationDigest:4===t&&(this.oAuthImplementation=new m),this.oAuthImplementation.initAuth()}getAuthType(){return this.oAuthImplementation instanceof m?4:2}getUserInfo(){return this.oAuthImplementation.getUserInfo?this.oAuthImplementation.getUserInfo():""}noLogin(t){this.oAuthImplementation||this.setAuthType(2),this.oAuthImplementation.noLogin(t)}login(t,e,i,r){let u=null,a={name:t,password:e,succ:i,fail:r,xml:u},h=this;return new Promise(((e,i)=>{let r=(0,s.FB)((new Date).getTime().toString()).substring(0,8);r=parseInt(r.replace("#",""),16).toString().substring(0,8),p.request("/ISAPI/Security/sessionLogin/capabilities",{type:"GET",params:{username:t,random:r}}).then((({data:t})=>{let s=(0,o.rV)("deviceInfo");if(s){let t=JSON.parse(s);if(t&&"hcp"===t.platform&&"lan"===t.mode)return h.setAuthType(2),void h.oAuthImplementation.login(a).then((t=>{e(t)}),(t=>{i(t)}))}u=t,2===(0,n.qd)(t,"sessionIDVersion","i")?h.setAuthType(4):h.setAuthType(3),a.xml=u,h.oAuthImplementation.login(a).then((t=>{e(t)}),(t=>{i(t)}))})).catch((()=>{h.setAuthType(2),h.oAuthImplementation.login(a).then((t=>{e(t)}),(t=>{i(t)}))}))}))}logout(){return this.oAuthImplementation&&this.oAuthImplementation.logout(),(0,n.LD)()}getAuth(){return this.oAuthImplementation?this.oAuthImplementation.getAuth():""}setAuth(t){this.oAuthImplementation.setAuth(t)}setUserInfo(t){this.oAuthImplementation.setUserInfo&&this.oAuthImplementation.setUserInfo(t)}updateAuth(t,e){this.oAuthImplementation.updateAuth(t,e)}setHeartBeat(t){if(this.oAuthImplementation&&this.oAuthImplementation.setHeartBeat)return this.oAuthImplementation.setHeartBeat(t)}async getPluginAuth(){return this.oAuthImplementation?this.oAuthImplementation.getPluginAuth():""}async getPluginAuthV2(){return this.oAuthImplementation&&this.oAuthImplementation.getPluginAuthV2?this.oAuthImplementation.getPluginAuthV2():""}}const f=new class{constructor(){this.oAuthInfo={isLogin:!1,name:"",auth:"",szAESKey:"",oDeviceInfo:{ip:"",port:80,protocol:"http:"},authType:2},this.oSecurityCap={isIrreversible:!1,salt:"",iMaxQANum:3,iSecurityVersion:0,iKeyIterateNum:0},this.oAuthImplementation=new g,this.setRequestOptions()}_init(t){let e=(0,o.rV)("authInfo");e?(this.oAuthInfo=JSON.parse((0,s.NV)(e)),this.oAuthImplementation.setAuthType(this.oAuthInfo.authType),this.oAuthImplementation.setAuth(this.oAuthInfo.auth),this.oAuthImplementation.setUserInfo(this.oAuthInfo.userInfo),this.oAuthImplementation.setHeartBeat(t)):this.reset()}async registerDevice(t,e,i,n){this._init(n),this.oAuthInfo.oDeviceInfo.ip=t,this.oAuthInfo.oDeviceInfo.port=e,this.oAuthInfo.oDeviceInfo.protocol=i,p.initURL(t,e,i),this.oAuthInfo.isLogin&&await this._getSecurityCap(this.oAuthInfo.name).catch((()=>{}))}reset(){this.oAuthInfo.isLogin=!1,this.oAuthInfo.authType=2,this.oAuthInfo.auth="",this.oAuthInfo.szAESKey="",this.oAuthInfo.name="",this.oAuthInfo.userInfo="",(0,o.cl)("authInfo")}isLogin(){return this.oAuthInfo.isLogin}noLogin(t,e,i,n,r){this.oAuthImplementation.noLogin(t);var u=this.oAuthInfo;return u.isLogin=!0,u.name=t,u.auth="",u.authType=this.oAuthImplementation.getAuthType(),u.userInfo=this.oAuthImplementation.getUserInfo(),new Promise((i=>{u.szAESKey=this._strToAESKey("",t),(0,o.LS)("authInfo",(0,s.oF)(JSON.stringify(u)));var a={oAuthInfo:u};e&&e.apply(n,[a].concat(r||[])),i()}))}login(t,e,i,n,r,u){let a=this.oAuthInfo;return new Promise(((h,l)=>{this.oAuthImplementation.login(t,e,(n=>{a.isLogin=!0,a.name=t,a.auth=this.oAuthImplementation.getAuth(),a.authType=this.oAuthImplementation.getAuthType(),a.userInfo=this.oAuthImplementation.getUserInfo(),this._getSecurityCap(a.name).then((()=>{a.szAESKey=this._strToAESKey(e,t),(0,o.LS)("authInfo",(0,s.oF)(JSON.stringify(a))),localStorage.setItem("authExchanger/"+this.oAuthInfo.oDeviceInfo.ip+":"+this.oAuthInfo.oDeviceInfo.port,(0,s.oF)(JSON.stringify(a)));let l={oAuthInfo:a,oExtraInfo:n};i&&i.apply(r,[l].concat(u||[])),h()}))}),(t=>{(0,o.cl)("authInfo"),n&&n.apply(r,[t].concat(u||[])),l(t)}))}))}logout(t,e){return this.oAuthInfo.isLogin=!1,this.oAuthImplementation.logout().then((()=>{(0,o.cl)("authInfo"),localStorage.setItem("authExchanger/"+this.oAuthInfo.oDeviceInfo.ip+":"+this.oAuthInfo.oDeviceInfo.port,"{}"),t&&t()}),(t=>{e&&e(t)}))}getAuthType(){return this.oAuthImplementation.getAuthType()}getAuthInfo(){return this.oAuthInfo.isLogin?this.oAuthInfo:null}async updateAuth(t,e){this.oAuthInfo.isLogin&&(await this._getSecurityCap(t),this.oAuthImplementation.updateAuth(t,e),this.oAuthInfo.name=t,this.oAuthInfo.auth=this.oAuthImplementation.getAuth(),this.oAuthInfo.szAESKey=this._strToAESKey(e,t),this.oAuthInfo.userInfo=this.oAuthImplementation.getUserInfo(),(0,o.LS)("authInfo",(0,s.oF)(JSON.stringify(this.oAuthInfo))),localStorage.setItem("authExchanger/"+this.oAuthInfo.oDeviceInfo.ip+":"+this.oAuthInfo.oDeviceInfo.port,(0,s.oF)(JSON.stringify(this.oAuthInfo))))}setRequestOptions(t){if(t){let e=$.extend({},t);t[401]&&(e[401]=function(){this.reset(),t[401]()}),c.setOptions(t)}else c.setOptions({401:()=>{this.reset()}})}async getPluginAuth(){return this.oAuthImplementation.getPluginAuth()}async getPluginAuthV2(){return this.oAuthImplementation.getPluginAuthV2()}getUserName(){return this.oAuthInfo.name}activeDevice(t){return this.encodeChallenge(t,(0,s.VY)(),!1).then((t=>{var e=(0,n.Ab)("<?xml version='1.0' encoding='UTF-8'?><ActivateInfo><password>"+t+"</password></ActivateInfo>");return this.request("/ISAPI/System/activate",{type:"PUT",data:e,success:null})}))}encodeChallenge(t,e,i){let o=e;e||(o=(0,s.VY)());let r=new Date+"",u=(0,s.F8)(r,o),a=(0,s.r$)(u),h="<?xml version='1.0' encoding='UTF-8'?><PublicKey><key>"+(0,s.oF)(a)+"</key></PublicKey>",l=(0,n.Ab)(h);return this.request("/ISAPI/Security/challenge",{type:"POST",data:l,success:function(e){let r=(0,s.ZY)((0,s.NV)((0,n.qd)(e,"key")),u);if(null!==r){let e;var a=[];e=256===o?(0,n.NC)(r):r;let u=(0,s.zy)(r.substring(0,16),e,"ecb");if("string"==typeof t)return(0,s.oF)(u+(0,s.zy)(i?(0,s.oF)(t):t,e,"ecb"));if($.isArray(t))return t.forEach((t=>{a.push((0,s.oF)(u+(0,s.zy)(i?(0,s.oF)(t):t,e,"ecb")))})),a}}})}request(t,e){return e.iSecurityVersion=this.oSecurityCap.iSecurityVersion,p.request(t,e)}_getSecurityCap(t){let e=this;if(!this.oAuthInfo.isLogin)return new Promise(((t,e)=>e()));let i=!1,o=null;return t&&(i=!0,o={username:t}),this.request("/ISAPI/Security/capabilities",{queryObject:i,data:o,processData:!0,type:"GET",success:t=>{e.oSecurityCap.iKeyIterateNum=(0,n.qd)(t,"keyIterateNum","i"),e.oSecurityCap.isIrreversible=(0,n.qd)(t,"isIrreversible","b"),e.oSecurityCap.salt=(0,n.qd)(t,"salt");let i=nodeAttr(t,"securityVersion","opt");if(""!==i){let t=i.split(",");e.oSecurityCap.iSecurityVersion=parseInt(t[t.length-1],10)}else e.oSecurityCap.iSecurityVersion=0;e.oSecurityCap.iSecurityVersion&&(e.oSecurityCap.bSptUserCheck=(0,n.qd)(t,"isSupportUserCheck","b"))}})}_strToAESKey(t,e){let i=(t,e)=>{let i=t;if(this.oSecurityCap.isIrreversible){let i=this.oSecurityCap.salt;return(0,s.JQ)(e+i+t)}return i};var n="";if(this.oSecurityCap.iKeyIterateNum>0){n=(0,s.JQ)(i(t,e)+"AaBbCcDd1234!@#$");for(var o=1;o<this.oSecurityCap.iKeyIterateNum;o++)n=(0,s.JQ)(n)}return n&&n.substring(0,32)}},I=new class{constructor(){this.oCombinedResult={bSet:!1,cachePromise:[]},this.oSecurityCap=f.oSecurityCap,this.iAnalogChannelNum=0,this.iAnalogAlarmOutputNum=0,this.iAnalogAlarmInputNum=0,this.bSupportIOOutputUnify=!1,this.oDeviceInfo={hostName:location.hostname,protocol:location.protocol+"//",port:location.port}}resetLoginInfo(){f.reset()}async registerDevice(t,e,i,n){this.oDeviceInfo.hostName=t,this.oDeviceInfo.port=e,this.oDeviceInfo.protocol=i+"//",await f.registerDevice(t,e,i,n).catch((t=>{console.log(t)})),f.isLogin()&&((()=>{this.request("GET","AnalogChannelInfo",{},{success:t=>{this.iAnalogChannelNum=parseInt($(t).find("VideoInputChannel").length,10)}})})(),(()=>{this.request("GET","AnalogAlarmOutputInfo",{},{success:t=>{this.iAnalogAlarmOutputNum=$(t).find("IOOutputPort").length,$(t).find("IOType").length&&(this.bSupportIOOutputUnify=!0)}})})(),(()=>{this.request("GET","AnalogAlarmInputInfo",{},{success:t=>{this.iAnalogAlarmInputNum=$(t).find("IOInputPort").length}})})())}login(t,e,i,n,o,s){return f.login(t,e,i,n,o,s)}noLogin(t,e,i,n,o){return f.noLogin(t,e,i,n,o)}logout(){return f.logout()}isLogin(){return f.isLogin()}activeDevice(t){return f.activeDevice(t)}getSecurityUrl(t,e){let i=this.oSecurityCap.iSecurityVersion;return i>0&&(e=e||(0,s.FB)((new Date).getTime().toString()),-1!==t.indexOf("?")?t+="&security="+i+"&iv="+e+"&key="+f.getAuthInfo().szAESKey:t+="?security="+i+"&iv="+e+"&key="+f.getAuthInfo().szAESKey),t}checkVerificationCode(t){let e=(0,s.FB)((new Date).getTime().toString()),i=(0,s.JQ)(e+t),n="<?xml version='1.0' encoding='UTF-8'?>";return n+="<CheckInfo><randomString>"+e+"</randomString>",n+="<verificationCode>"+(t=(0,s.oF)(i))+"</verificationCode>",n+="</CheckInfo>",n}encodeAES(t){let e=(0,s.FB)((new Date).getTime().toString());return{szEncodeStr:(0,s.zy)((0,s.oF)((0,n.YW)(t)),f.getAuthInfo().szAESKey,e),iSecurityVersion:this.oSecurityCap.iSecurityVersion,szIV:e,szAESKey:f.getAuthInfo().szAESKey}}axios(t){return t||(t={}),t.oParam||(t.oParam=null),this.request(t.type||"GET",t.cmd,t.oParam,t)}WSDK_GetDeviceConfig(t,e,i){return i||(i={}),e||(e=null),this.request("GET",t,e,i)}WSDK_GetDeviceConfigResolve(t,e,i){return i||(i={}),e||(e=null),this.request("GET",t,e,i).catch((()=>{}))}WSDK_GetSecurityVersion(t,e,i){return i||(i={}),e||(e=null),this.request("GET",t,e,i)}WSDK_GetDeviceConfigCache(t,e,i,n){let o={cacheResult:{cache:!0,bUpdate:!!n}};return $.extend(o,i),this.WSDK_GetDeviceConfig(t,e,o)}WSDK_SetDeviceConfig(t,e,i){return i||(i={}),e||(e=null),this.request("PUT",t,e,i)}async setSaveGroup(t){this.oCombinedResult.cachePromise.length=0,this.oCombinedResult.bSet=!0;try{await t()}catch(t){}let e=Promise.all(this.oCombinedResult.cachePromise).then((()=>{})).catch((()=>{}));return this.oCombinedResult.bSet=!1,e}setRequestOptions(t){f.setRequestOptions(t)}async getPluginAuth(){return f.getPluginAuth()}async getPluginAuthV2(){return f.getPluginAuthV2()}updateAuth(t,e){return f.updateAuth(t,e)}getUserName(){return f.getUserName()}generateUrl(t){let e=t;try{if("function"==typeof(window.rewriteRequestUrl||opener&&opener.rewriteQuestUrl||top.rewriteQuestUrl)){let i=(window.rewriteRequestUrl||opener&&opener.rewriteQuestUrl||top.rewriteQuestUrl)(t);i&&(e=i)}}catch(t){}return e}formatString(...t){let e=t[0];for(let i=1;i<t.length;i++)e=""!==t[i]?e.replace("%s",t[i]):e.replace("/%s","");return e}checkCommand(t,e){return t in r||(this.callUserFun(null,e),!1)}callUserFun(t,e){e&&(t||(t=""),"function"==typeof e.error&&e.error(t),"function"==typeof e.complete&&e.complete(t))}request(t,e,i,n){if(!this.checkCommand(e,n))return this.callUserFun(null,i),null;let o=r[e],s=i,u=n;if(n.command=e,void 0!==o.req)for(let t=0;t<o.req.length;t++)if(!(o.req[t]in s))return this.callUserFun(null,u),null;n.type||(o.method?n.type=o.method:n.type=t);let a=o.url;const{protocol:h,hostName:l,port:c}=this.oDeviceInfo;let p=this.formatString(a,h,l,c);if(void 0!==o.req)for(let t=0;t<o.req.length;t++)p=this.formatString(p,s[o.req[t]]);return f.request(p,u)}}},944:(t,e,i)=>{i.d(e,{Z:()=>r});const n="/login";let o=0,s="";const r=new class{constructor({routes:t=[]}={}){this.routes=t||[],this.routesMap={},this._init()}_init(){window.addEventListener("hashchange",(t=>{const e=t.newURL.match(/#(\/.*)$/);e&&e[1]?this._renderPage(e[1]):this._renderPage("/")})),this.routesMap=function(){const t=i(236),e={};return t.keys().forEach((i=>{const n=i.split("/"),o=n.length,s=n.slice(1,o-1),r=n.slice(-1)[0].replace(/\..+?$/,""),u="/"+s.join("/");r===n[o-2]&&(e[u]||(e[u]={path:u}),function({key:t,aModuleList:e,routeArr:i},n){const o=t.replace(/^.+\./,"");if(i.length>1&&(n.parent=i[i.length-2]),"html"===o)n.template=e(t).default;else if("js"===o){if("function"!=typeof e(t).default)throw new Error("page js expectd export default a function ");n.module=e(t).default}}({key:i,aModuleList:t,routeArr:s},e[u]))})),e}(),this._originJump()}_originJump(){let t=this._getCurrentPath();t||(t=n),this.push(t),this._renderPage(t)}_getCurrentPath(){const t=window.location.hash;return t?t.slice(1):""}push(t){t!==this._getCurrentPath()&&(window.location.hash=`#${t}`)}_renderPage(t){const e=Date.now();if(s===t&&e-o<500)return;const{routesMap:i}=this;if(t in i){const n=i[t];let r=this.getParentNode(n);if(!r){const e=t.split("/");if(!(e.length>2))throw new Error("router need a container");this._renderPage(e.slice(0,e.length-1).join("/")),r=this.getParentNode(n)}r.innerHTML="";const u=document.createElement("div");r.appendChild(u),u.outerHTML=n.template,n.module&&"function"==typeof n.module&&n.module(),s=t,o=e}else this._renderPage(n)}getParentNode(t){return t.parent?document.querySelector("#"+t.parent+"--router"):document.querySelector("#app")}}},790:(t,e,i)=>{function n(t){if(null===t||""===t)return null;t=t.replace(/&(?!lt;|amp;|gt;|apos;|quot;)/g,"&amp;");var e=null;try{window.navigator.userAgent.indexOf("MSIE 9.0")>0?((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml")}catch(i){(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}return e}function o(t){if(null===t)return"";var e="";try{e=(new XMLSerializer).serializeToString(t)}catch(i){try{e=t.xml}catch(t){return""}}return-1===e.indexOf("<?xml")&&(e="<?xml version='1.0' encoding='utf-8'?>"+e),e}function s(t,e,i,n){let o=t.getElementsByTagName(e).length?t.getElementsByTagName(e)[0]:{};if(void 0===n){let n=o.textContent||"";if("i"===i)return parseInt(n,10)||0;if("f"===i)return parseFloat(n)||0;if("b"===i)return"true"===n;if("t"===i){let t=1;return"true"===n?t=1:"false"===n?t=2:"readonly"===n&&(t=3),t}return"l"===i?$(t).find(e).length>0:"a"===i?n.split(","):n}return o.innerText=n,this}function r(t){let e=document.createElement("a");return e.innerHTML=t,window.navigator.userAgent.indexOf("MSIE 8.0")>-1?t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&amp;/g,"&"):e.textContent||e.innerText}function u(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function a(t,e,i){let n=i;"function"!=typeof i&&(n=()=>i),t&&t.documentElement?$(t).find(e).each((function(){$(this).text(n($(this).text()))})):"object"==typeof t&&("object"!=typeof t[e]&&Object.prototype.hasOwnProperty.call(t,e)?t[e]=n(t[e]):"object"==typeof t&&$.each(t,(n=>{this.deepObj(t[n],e,i)})))}function h(t){let e="";for(let i=0;i<t.length;i++)""===e?e=t.charCodeAt(i).toString(16):t.charCodeAt(i)<16?e+="0"+t.charCodeAt(i).toString(16):e+=t.charCodeAt(i).toString(16);return e}function l(t){return new Promise((e=>{e(t)}))}i.d(e,{Ab:()=>n,Fj:()=>o,qd:()=>s,v5:()=>r,YW:()=>u,sq:()=>a,NC:()=>h,LD:()=>l})}}]);